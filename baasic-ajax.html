<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../baasic-globals/globals-import.html">
<link rel="import" href="../core-ajax/core-ajax.html">

<polymer-element name="baasic-ajax" extends="core-ajax">
    <template>
        <shadow>
        </shadow>
    </template>
    <script>
        Polymer('baasic-ajax', {
            go: function () {
                var headers = this.headers || {};
                var baasicUser = Baasic.Cache.getItem('baasicUser');
                if (baasicUser && baasicUser.accessToken) {
                    headers['Authorization'] = baasicUser.tokenType + ' ' + baasicUser.accessToken;
                }
                else if (!headers['Authorization']) {
                    headers['Authorization'] = '';
                }
                this.headers = headers;

                this.super();
            }
        });
    </script>
</polymer-element>